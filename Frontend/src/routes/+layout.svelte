<script>
	import '../app.postcss';
	import { goto } from '$app/navigation';
	import { AppShell, AppBar, TabGroup, TabAnchor } from '@skeletonlabs/skeleton';
	// Floating UI for Popups
	import { computePosition, autoUpdate, flip, shift, offset, arrow } from '@floating-ui/dom';
	import { storePopup } from '@skeletonlabs/skeleton';
	import { onMount } from 'svelte';
	storePopup.set({ computePosition, autoUpdate, flip, shift, offset, arrow });
</script>

<!-- App Shell -->
<AppShell>
	<svelte:fragment slot="header">
		<AppBar>
			<svelte:fragment slot="lead">
				<a href="/" style="width:90px;">
					<img
						alt="logo"
						src="https://img.hellofresh.com/f_auto,fl_lossy,q_auto/hellofresh_website/us/landing-pages/b2b/Hello_Fresh_White_Lockup_CMYK.png"
						width="100%"
					/>
				</a>
			</svelte:fragment>
			<svelte:fragment slot="trail">
				<button on:click={() => goto('/prep')} type="button" class="btn-icon variant-filled">
					<!-- <svg
						fill="#ffffff"
						height="20px"
						width="25px"
						version="1.1"
						id="Capa_1"
						xmlns="http://www.w3.org/2000/svg"
						xmlns:xlink="http://www.w3.org/1999/xlink"
						viewBox="0 0 297 297"
						xml:space="preserve"
						data-darkreader-inline-fill=""
						style="--darkreader-inline-fill: #121414; --darkreader-inline-stroke: #aeadaa;"
						stroke="#ffffff"
						stroke-width="0.00297"
						data-darkreader-inline-stroke=""
						><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g
							id="SVGRepo_tracerCarrier"
							stroke-linecap="round"
							stroke-linejoin="round"
						></g><g id="SVGRepo_iconCarrier">
							<path
								d="M296.033,108.22c0-37.967-30.877-68.855-68.83-68.855c-1.649,0-3.314,0.062-4.987,0.187C205.884,14.997,178.215,0,148.5,0 c-29.714,0-57.383,15-73.715,39.552c-1.673-0.125-3.338-0.187-4.987-0.187c-37.954,0-68.831,30.888-68.831,68.855 c0,34.637,25.704,63.368,59.031,68.142v95.157c0,14.051,11.43,25.481,25.48,25.481h126.044c14.051,0,25.48-11.431,25.48-25.481 v-95.157C270.33,171.588,296.033,142.856,296.033,108.22z M211.522,277.399H85.479c-3.186,0-5.88-2.693-5.88-5.881v-95.147 c9.602-1.36,18.718-4.722,26.941-9.95c12.613,6.822,26.958,10.651,41.96,10.651s29.346-3.829,41.959-10.65 c8.225,5.227,17.342,8.589,26.943,9.949v95.147C217.402,274.706,214.709,277.399,211.522,277.399z M227.203,157.471 c-6.597,0-12.974-1.289-18.9-3.766c11.927-10.934,20.943-25.146,25.47-41.479c1.445-5.216-1.611-10.617-6.827-12.063 c-5.217-1.445-10.616,1.612-12.063,6.827c-8.236,29.723-35.534,50.481-66.383,50.481s-58.146-20.758-66.383-50.481 c-1.445-5.216-6.843-8.272-12.063-6.827c-5.216,1.445-8.272,6.847-6.827,12.063c4.526,16.333,13.543,30.546,25.47,41.479 c-5.926,2.477-12.303,3.766-18.899,3.766c-27.146,0-49.23-22.094-49.23-49.251c0-27.158,22.085-49.254,49.23-49.254 c2.744,0,5.569,0.246,8.397,0.73c4.082,0.696,8.17-1.247,10.2-4.861c12.205-21.733,35.236-35.234,60.104-35.234 s47.899,13.502,60.106,35.235c2.029,3.614,6.115,5.557,10.2,4.86c2.828-0.484,5.653-0.73,8.396-0.73 c27.145,0,49.229,22.096,49.229,49.254C276.433,135.377,254.348,157.471,227.203,157.471z"
							></path>
						</g></svg
					> -->
					<svg
						width="30px"
						height="30px"
						viewBox="0 0 960 960"
						fill="none"
						xmlns="http://www.w3.org/2000/svg"
					>
						<path
							d="M462.845 238.751C608.272 59.0617 868.192 314.774 663.067 453.832C704.924 520.181 781.81 677.054 694.09 733.093C607.167 785.186 506.403 830.604 403.146 821.158C325 812.109 321.856 723.932 308.217 662.877C300.22 625.03 295.954 586.416 287.25 548.769C101.408 587.657 76.9909 377.001 234.728 318.38C236.769 317.745 239.062 315.442 239.781 313.401C267.643 220.718 384.616 186.295 462.845 238.751ZM288.796 311.268C312.331 311.029 390.539 332.934 366.868 366.925C361.173 373.897 351.777 376.023 343.019 372.185C282.31 334.175 201.202 363.569 180.421 432.023C152.495 530.688 311.819 522.314 341.27 453.293C354.047 427.784 392.436 439.692 385.994 468.051C376.461 494.977 354.36 515.11 330.526 529.819C322.398 534.748 329.879 547.678 330.453 555.267C342.772 605.319 352.184 656.015 362.368 706.535C363.437 711.951 365.394 714.056 371.314 714.092C476.267 715.393 582.157 686.679 665.139 620.318C682.074 606.506 682.382 606.778 676.05 585.874C669.037 562.72 661.5 539.321 645.279 521.079C634.337 508.774 627.466 494.672 619.605 480.831C617.704 475.995 615.641 473.912 610.004 475.559C584.884 481.766 559.344 481.874 533.839 478.799C503.39 475.193 506.238 431.905 537.379 432.277C630.447 449.229 729.016 368.391 677.307 276.05C642.017 220.903 552.954 200.795 501.027 260.169C486.978 270.728 527.809 295.239 521.637 350.894C520.631 364.004 510.23 373.559 498.196 373.485C483.931 373.68 473.486 359.363 474.587 344.811C470.776 252.698 328.94 231.236 288.796 311.268ZM684.879 638.7C591.409 707.765 486.884 739.793 371.296 739.368C398.406 826.971 571.138 744.162 626.436 719.785C658.685 704.126 690.885 679.298 684.879 638.7Z"
							fill="#000000"
						/>
						<path
							d="M99.5719 757.195C73.8529 757.242 68.6569 729.975 85.2559 716.192C117.465 690.775 145.362 658.216 182.179 639.502C200.43 630.953 217.2 652.783 205.874 668.819C180.098 698.678 146.377 721.205 117.498 748.097C111.428 753.336 105.009 757.417 99.5719 757.195Z"
							fill="#000000"
						/>
						<path
							d="M907.398 446.191C906.987 453.105 902.253 459.639 894.58 463.911C862.054 482.021 829.522 500.127 796.803 517.885C782.966 525.395 771.698 523.523 765.623 513.784C754.02 496.642 779.704 479.261 794.467 471.224C819.303 456.327 844.135 441.412 869.252 426.999C885.474 416.421 908.413 422.681 907.398 446.191Z"
							fill="#000000"
						/>
						<path
							d="M359.597 150.197C359.69 161.116 354.812 168.556 346.897 171.389C338.937 174.238 330.015 171.911 324.464 165.115C307.245 136.189 294.732 104.402 279.444 74.3576C264.783 46.1146 304.559 25.1176 318.492 54.1146C332.119 85.8096 349.112 117.53 359.597 150.197Z"
							fill="#000000"
						/>
						<path
							d="M871.006 775.347C870.901 797.017 845.223 801.927 830.057 789.629C817.515 782.723 804.977 775.808 792.524 768.742C781.64 763.583 772.183 753.015 777.495 740.412C780.346 732.76 787.793 727.68 796.351 728.116C819.265 731.488 838.859 746.885 859.808 756.174C867.393 760.174 871.034 767.422 871.006 775.347Z"
							fill="#000000"
						/>
						<path
							d="M734.891 192.242C689.425 186.564 729.513 140.188 740.813 119.716C757.112 95.5671 793.141 119.582 777.277 144.12C767.279 156.921 751.399 192.109 734.891 192.242Z"
							fill="#000000"
						/>
						<path
							d="M328.049 919.198C310.014 919.008 299.148 902.379 306.568 887.487C311.809 876.969 318.982 867.236 326.383 858.029C332.323 850.639 341.939 849.477 349.567 853.292C357.393 857.206 362.558 866.125 359.623 875.324C355.83 887.211 350.574 898.765 344.715 909.808C341.144 916.537 333.862 919.195 328.049 919.198Z"
							fill="#000000"
						/>
						<path
							d="M95.6653 353.486C85.8563 352.297 73.5083 347.107 62.0593 340.351C52.8403 334.911 50.1533 323.234 54.2593 314.004C66.3913 287.797 95.5173 308.074 112.676 317.575C131.644 330.888 121.348 356.419 95.6653 353.486Z"
							fill="#000000"
						/>
						<path
							d="M288.794 311.265C328.944 231.254 470.772 252.672 474.586 344.809C473.47 359.384 483.942 373.653 498.194 373.48C510.228 373.555 520.629 364 521.637 350.889C527.793 294.788 487.029 271.312 501.022 260.166C552.95 200.791 642.014 220.899 677.306 276.05C728.878 368.554 630.622 449.123 537.373 432.269C506.163 431.905 503.458 475.211 533.837 478.796C559.341 481.871 584.88 481.763 610.001 475.555C615.525 473.886 617.827 476.019 619.6 480.828C627.462 494.668 634.333 508.771 645.275 521.076C661.497 539.318 669.033 562.717 676.046 585.871C682.378 606.775 682.069 606.503 665.134 620.313C582.167 686.682 476.251 715.387 371.31 714.09C365.389 714.053 363.432 711.948 362.363 706.532C351.712 649.227 338.509 592.394 326.628 535.398C326.431 533.671 328.685 530.912 330.522 529.815C354.344 515.119 376.465 494.967 385.991 468.048C392.47 439.665 353.972 427.814 341.27 453.294C311.837 522.311 152.461 530.68 180.411 432.015C201.22 363.581 282.277 334.151 343.017 372.185C351.774 376.02 361.168 373.894 366.863 366.921C390.517 333.054 312.611 311.051 288.794 311.265Z"
							fill="white"
						/>
						<path
							d="M684.88 638.699C690.86 679.309 658.709 704.115 626.435 719.779C571.164 744.104 398.557 827.017 371.297 739.367C486.885 739.792 591.41 707.764 684.88 638.699Z"
							fill="white"
						/>
					</svg>
				</button>

				<button
					on:click={() => goto('/my-meals')}
					type="button"
					class="btn-icon variant-filled white-fill"
					><svg
						width="30px"
						height="30px"
						viewBox="0 0 72 72"
						id="emoji"
						xmlns="http://www.w3.org/2000/svg"
					>
						<g id="color">
							<path
								fill="#D0CFCE"
								stroke="none"
								stroke-miterlimit="10"
								stroke-width="2"
								d="M66.1204,26.2961 C66.1204,20.353,61,14.1351,61,16s0.9471,26.6324,0.9471,26.6324L61,58.8287c0,1.1046,0.8954,2,2,2s2-0.8954,2-2l-0.5289-16.2893 C64.4711,42.5394,66.1204,32.2392,66.1204,26.2961z"
							/>
							<path
								fill="#D0CFCE"
								stroke="none"
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-miterlimit="10"
								stroke-width="2"
								d="M11.4211,16.7398c0,0,0.1115,4.158,0.1115,8.1058c0,2.9609-0.8993,4.8203-2.1809,5.565l0,0l0.0285,28.4181c0,1.1046-0.8954,2-2,2 s-2-0.8954-2-2L6.191,30.4165l0,0C4.904,29.6757,4,27.8142,4,24.8456c0-3.9478,0.1115-8.1058,0.1115-8.1058"
							/>
							<line
								x1="7.7663"
								x2="7.7663"
								y1="16.7398"
								y2="26.3247"
								fill="#D0CFCE"
								stroke="none"
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-miterlimit="10"
								stroke-width="2"
							/>
							<circle
								cx="36"
								cy="35.9583"
								r="19.9583"
								fill="#D0CFCE"
								stroke="none"
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-miterlimit="10"
								stroke-width="2"
							/>
							<circle
								cx="36.0042"
								cy="36"
								r="12.1495"
								fill="#D0CFCE"
								stroke="none"
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-miterlimit="10"
								stroke-width="2"
							/>
						</g>
						<g id="hair" />
						<g id="skin" />
						<g id="skin-shadow" />
						<g id="line">
							<path
								fill="none"
								stroke="#000000"
								stroke-miterlimit="10"
								stroke-width="2"
								d="M66.1204,26.2961 C66.1204,20.353,61,14.1351,61,16s0.9471,26.6324,0.9471,26.6324L61,58.8287c0,1.1046,0.8954,2,2,2s2-0.8954,2-2l-0.5289-16.2893 C64.4711,42.5394,66.1204,32.2392,66.1204,26.2961z"
							/>
							<path
								fill="none"
								stroke="#000000"
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-miterlimit="10"
								stroke-width="2"
								d="M11.4211,16.7398c0,0,0.1115,4.158,0.1115,8.1058c0,2.9609-0.8993,4.8203-2.1809,5.565l0,0l0.0285,28.4181c0,1.1046-0.8954,2-2,2 s-2-0.8954-2-2L6.191,30.4165l0,0C4.904,29.6757,4,27.8142,4,24.8456c0-3.9478,0.1115-8.1058,0.1115-8.1058"
							/>
							<line
								x1="7.7663"
								x2="7.7663"
								y1="16.7398"
								y2="26.3247"
								fill="none"
								stroke="#000000"
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-miterlimit="10"
								stroke-width="2"
							/>
							<circle
								cx="36"
								cy="35.9583"
								r="19.9583"
								fill="none"
								stroke="#000000"
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-miterlimit="10"
								stroke-width="2"
							/>
							<circle
								cx="36.0042"
								cy="36"
								r="12.1495"
								fill="none"
								stroke="#000000"
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-miterlimit="10"
								stroke-width="2"
							/>
						</g>
					</svg>
				</button>
				<svg
					class="small-robot"
					xmlns="http://www.w3.org/2000/svg"
					height="1em"
					viewBox="0 0 640 512"
				>
					<style>
						svg {
							fill: #ffffff;
						}
					</style><path
						d="M320 0c17.7 0 32 14.3 32 32V96H472c39.8 0 72 32.2 72 72V440c0 39.8-32.2 72-72 72H168c-39.8 0-72-32.2-72-72V168c0-39.8 32.2-72 72-72H288V32c0-17.7 14.3-32 32-32zM208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H208zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H304zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H400zM264 256a40 40 0 1 0 -80 0 40 40 0 1 0 80 0zm152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80zM48 224H64V416H48c-26.5 0-48-21.5-48-48V272c0-26.5 21.5-48 48-48zm544 0c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48H576V224h16z"
					/></svg
				>
			</svelte:fragment>
		</AppBar>
	</svelte:fragment>
	<!-- Page Route Content -->
	<slot />
</AppShell>

<style>
	.small-robot {
		position: absolute;
		top: 12px;
		right: 70px;
	}
	:global(.app-bar-slot-trail) {
		justify-content: flex-end !important;
	}
	.btn-icon,
	.btn {
		background-color: rgb(var(--color-surface-500)) !important;
		color: white;
	}
	.white-fill path,
	.white-fill circle {
		fill: white;
	}
</style>
